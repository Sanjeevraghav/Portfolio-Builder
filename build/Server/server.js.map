{"version":3,"sources":["../../src/Server/server.js"],"names":[],"mappings":";;;;;;;;;;AAKA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAM,MAAM,mBAAZ,C;;;;AACA,IAAI,GAAJ,CAAQ,gCAAR;AACA,IAAI,GAAJ,CAAQ,0BAAgB,aAAhB,EAAR;AACA,IAAM,SAAS,yBAAf;AACA,IAAI,GAAJ,CAAQ,2BAAS,EAAC,OAAM,eAAK,YAAZ,EAAT,CAAR;AACA,IAAI,GAAJ,CAAQ,yBAAM,YAAY,YAAlB,CAAR;AACA,IAAI,GAAJ,CAAQ,OAAO,UAAP,EAAR;AACA,qBAAG,GAAH;AACA,OAAO,GAAP,CAAW,GAAX;AAAA,yEAAgB,iBAAO,GAAP,EAAY,IAAZ;AAAA;AAAA;AAAA;AAAA;AACZ,iDAAM,sBAAN;;AADY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;AAAA;AAAA;AAAA;AAAA;;AAIA,OAAO,IAAP,CAAY,UAAZ;AAAA,yEAAwB,kBAAe,GAAf,EAAoB,IAApB;AAAA,YAEhB,OAFgB,EAYhB,WAZgB,EAehB,WAfgB;AAAA;AAAA;AAAA;AAAA;AACpB,gCAAQ,GAAR,CAAY,KAAK,KAAjB;AACI,+BAFgB,GAEN;AACV,qCAAS,OADC;AAEV,kCAAO,GAFG;AAGV,kCAAM;AACF,sCAAM,wBADJ;AAEF,sCAAM;AAFJ,6BAHI;AAOV,mCAAQ;AAPE,yBAFM;;;AAYhB,mCAZgB,GAYF,qBAAW,eAAX,CAA2B,uCAAc,OAAd,CAA3B,CAZE;;;;AAehB,mCAfgB,GAeF;AACd,kCAAM,0CADQ,E;AAEd,gCAAI,8CAFU,E;AAGd,qCAAS,wCAAuC,KAAK,KAAL,CAAW,IAH7C,E;AAId,kCAAM,KAAK,KAAL,CAAW,OAAX,GAAqB,6BAArB,GAAoD,KAAK,KAAL,CAAW,K;AAJvD,yBAfE;;;;AAuBhB,oCAAY,QAAZ,CAAqB,WAArB,EAAkC,UAAS,KAAT,EAAgB,IAAhB,EAAqB;AACvD,gCAAG,KAAH,EAAS;AACL,uCAAO,QAAQ,GAAR,CAAY,KAAZ,CAAP;AACH;AACD,oCAAQ,GAAR,CAAY,mBAAmB,KAAK,QAApC;AACH,yBALG;AAMJ,6BAAK,IAAL,GAAY,SAAZ;;AA7BoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAxB;AAAA;AAAA;AAAA;AAAA;AA+BA,IAAI,MAAJ,CAAW,QAAQ,GAAR,CAAY,qBAAZ,IAAqC,QAAQ,GAAR,CAAY,IAAjD,IAAyD,IAApE,EAA0E,QAAQ,GAAR,CAAY,mBAAZ,IAAmC,WAA7G","file":"server.js","sourcesContent":["/**\n * Created by ashutosh on 23/04/16.\n */\n\n\nimport Koa from 'koa';\nimport serve from 'koa-static';\nimport Router from 'koa-router';\nimport compress from 'koa-compress';\nimport zlib from 'zlib';\nimport qs from 'koa-qs';\nimport nodemailer from 'nodemailer';\nimport smtpTransport from 'nodemailer-smtp-transport';\nimport koaBunyanLogger from 'koa-bunyan-logger';\n\nconst app = new Koa();\napp.use(koaBunyanLogger());\napp.use(koaBunyanLogger.requestLogger());\nconst router = new Router();\napp.use(compress({flush:zlib.Z_SYNC_FLUSH}));\napp.use(serve(__dirname + \"/../Public\"));\napp.use(router.middleware());\nqs(app);\nrouter.get(\"/\", async (ctx, next) => {\n    serve('../Public/index.html');\n});\n\nrouter.post(\"/message\", async function(ctx, next){\n    console.log(this.query);\n    let options = {\n        service: 'Gmail',\n        port : 587,\n        auth: {\n            user: 'ashuanindian@gmail.com',\n            pass: 'lwslrnvimfvbvgdz'\n        },\n        debug : true\n    };\n    // create reusable transporter object using the default SMTP transport\n    let transporter = nodemailer.createTransport(smtpTransport(options));\n\n// setup e-mail data with unicode symbols\n    let mailOptions = {\n        from: 'Ashutosh Sharma âœ” <ashutosh@ashu.online>', // sender address\n        to: 'ashuanindian@gmail.com, ashutosh@ashu.online', // list of receivers\n        subject: 'Hi Ashutosh you got a message from '+ this.query.name, // Subject line\n        text: this.query.message + \"\\n\\nPlease contact s/he on \"+ this.query.email // plaintext body\n    };\n\n// send mail with defined transport object\n        transporter.sendMail(mailOptions, function(error, info){\n        if(error){\n            return console.log(error);\n        }\n        console.log('Message sent: ' + info.response);\n    });\n    this.body = \"Success\";\n});\napp.listen(process.env.OPENSHIFT_NODEJS_PORT || process.env.PORT || 3000, process.env.OPENSHIFT_NODEJS_IP || '127.0.0.1');"]}