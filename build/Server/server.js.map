{"version":3,"sources":["../../src/Server/server.js"],"names":[],"mappings":";;;;;;;;;;AAKA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAM,MAAM,mBAAZ,C;;;;AACA,IAAI,GAAJ,CAAQ,gCAAR;AACA,IAAI,GAAJ,CAAQ,0BAAgB,aAAhB,EAAR;AACA,IAAM,SAAS,yBAAf;;AAEA,IAAI,GAAJ,CAAQ,2BAAS,EAAC,OAAM,eAAK,YAAZ,EAAT,CAAR;AACA,IAAI,GAAJ,CAAQ,8BAAR;AACA,IAAI,GAAJ,CAAQ,yBAAM,YAAY,YAAlB,CAAR;AACA,IAAI,GAAJ,CAAQ,OAAO,UAAP,EAAR;;AAEA,OAAO,GAAP,CAAW,GAAX;AAAA,yEAAgB,iBAAe,GAAf,EAAoB,IAApB;AAAA;AAAA;AAAA;AAAA;AACZ,iDAAM,sBAAN;;AADY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhB;AAAA;AAAA;AAAA;AAAA;;AAIA,OAAO,IAAP,CAAY,UAAZ;AAAA,yEAAwB,kBAAe,GAAf,EAAoB,IAApB;AAAA,YAGhB,OAHgB,EAahB,WAbgB,EAgBhB,WAhBgB;AAAA;AAAA;AAAA;AAAA;AACpB,gCAAQ,GAAR,CAAY,KAAK,OAAL,CAAa,IAAzB;;AAEI,+BAHgB,GAGN;AACV,qCAAS,OADC;AAEV,kCAAO,GAFG;AAGV,kCAAM;AACF,sCAAM,wBADJ;AAEF,sCAAM;AAFJ,6BAHI;AAOV,mCAAQ;AAPE,yBAHM;;;AAahB,mCAbgB,GAaF,qBAAW,eAAX,CAA2B,uCAAc,OAAd,CAA3B,CAbE;;;;AAgBhB,mCAhBgB,GAgBF;AACd,kCAAM,0CADQ,E;AAEd,gCAAI,8CAFU,E;AAGd,qCAAS,wCAAuC,KAAK,OAAL,CAAa,IAAb,CAAkB,IAHpD,E;AAId,kCAAM,KAAK,OAAL,CAAa,IAAb,CAAkB,OAAlB,GAA4B,4BAA5B,GAA0D,KAAK,OAAL,CAAa,IAAb,CAAkB,K;AAJpE,yBAhBE;;;;AAwBhB,oCAAY,QAAZ,CAAqB,WAArB,EAAkC,UAAS,KAAT,EAAgB,IAAhB,EAAqB;AACvD,gCAAG,KAAH,EAAS;AACL,uCAAO,QAAQ,GAAR,CAAY,KAAZ,CAAP;AACH;AACD,oCAAQ,GAAR,CAAY,mBAAmB,KAAK,QAApC;AACH,yBALG;AAxBgB;AAAA,+BA8BF,yBAAM,sBAAN,CA9BE;;AAAA;AA8BpB,6BAAK,IA9Be;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAxB;AAAA;AAAA;AAAA;AAAA;;AAiCA,IAAI,MAAJ,CAAW,QAAQ,GAAR,CAAY,qBAAZ,IAAqC,QAAQ,GAAR,CAAY,IAAjD,IAAyD,IAApE,EAA0E,QAAQ,GAAR,CAAY,mBAAZ,IAAmC,WAA7G","file":"server.js","sourcesContent":["/**\n * Created by ashutosh on 23/04/16.\n */\n\n\nimport Koa from 'koa';\nimport serve from 'koa-static';\nimport Router from 'koa-router';\nimport compress from 'koa-compress';\nimport zlib from 'zlib';\nimport bodyparser from 'koa-bodyparser';\nimport nodemailer from 'nodemailer';\nimport smtpTransport from 'nodemailer-smtp-transport';\nimport koaBunyanLogger from 'koa-bunyan-logger';\n\nconst app = new Koa();\napp.use(koaBunyanLogger());\napp.use(koaBunyanLogger.requestLogger());\nconst router = new Router();\n\napp.use(compress({flush:zlib.Z_SYNC_FLUSH}));\napp.use(bodyparser());\napp.use(serve(__dirname + \"/../Public\"));\napp.use(router.middleware());\n\nrouter.get(\"/\", async function(ctx, next){\n    serve('../Public/index.html');\n});\n\nrouter.post(\"/message\", async function(ctx, next) {\n    console.log(this.request.body);\n\n    let options = {\n        service: 'Gmail',\n        port : 587,\n        auth: {\n            user: 'ashuanindian@gmail.com',\n            pass: 'lwslrnvimfvbvgdz'\n        },\n        debug : true\n    };\n    // create reusable transporter object using the default SMTP transport\n    let transporter = nodemailer.createTransport(smtpTransport(options));\n\n// setup e-mail data with unicode symbols\n    let mailOptions = {\n        from: 'Ashutosh Sharma âœ” <ashutosh@ashu.online>', // sender address\n        to: 'ashuanindian@gmail.com, ashutosh@ashu.online', // list of receivers\n        subject: 'Hi Ashutosh you got a message from '+ this.request.body.name, // Subject line\n        text: this.request.body.message + \"\\n\\nPlease contact him on \"+ this.request.body.email // plaintext body\n    };\n\n// send mail with defined transport object\n        transporter.sendMail(mailOptions, function(error, info){\n        if(error){\n            return console.log(error);\n        }\n        console.log('Message sent: ' + info.response);\n    });\n    this.body = await serve('../Public/index.html');\n});\n\napp.listen(process.env.OPENSHIFT_NODEJS_PORT || process.env.PORT || 3000, process.env.OPENSHIFT_NODEJS_IP || '127.0.0.1');"]}